#!/bin/sh
#
# chkconfig: - 80 20
# description: MRIdb web application

NAME=`basename $0`

. /etc/rc.d/init.d/functions

export JAVA_HOME=/opt/jre1.6.0_30
PLAY=/opt/play-1.2.4/play
APP_PATH=/opt/MRIdb/

run(){
    ${PLAY} $1 $APP_PATH --%prod --pid_file=/var/lock/subsys/mridb > /dev/null
    RETVALUE=$? 
    if [ $RETVALUE -eq 0 ]
    then
        echo_success
    else
        echo_failure
    fi
    echo
}

case "$1" in
start)
    echo -n $"Starting $NAME: "
    run $1
    ;;  
stop)
    echo -n $"Stopping $NAME: "
    run $1
    ;;
restart)
    echo -n $"Restarting $NAME: "
    run $1
    ;;
*)
    echo "Usage: $SCRIPTNAME {start|stop|restart}" >&2
    exit 1
    ;;
esac

exit $?